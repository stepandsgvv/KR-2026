[15-Jan-2026 08:49:23 Europe/Moscow] PHP Fatal error:  Uncaught Error: Class "Auth" not found in D:\OSPanel\domains\localhost\login.php:20
Stack trace:
#0 {main}
  thrown in D:\OSPanel\domains\localhost\login.php on line 20
[15-Jan-2026 08:50:22 Europe/Moscow] PHP Fatal error:  Uncaught Error: Class "Auth" not found in D:\OSPanel\domains\localhost\login.php:20
Stack trace:
#0 {main}
  thrown in D:\OSPanel\domains\localhost\login.php on line 20
[15-Jan-2026 08:50:39 Europe/Moscow] PHP Fatal error:  Uncaught Error: Class "Auth" not found in D:\OSPanel\domains\localhost\login.php:20
Stack trace:
#0 {main}
  thrown in D:\OSPanel\domains\localhost\login.php on line 20
[15-Jan-2026 08:52:20 Europe/Moscow] PHP Fatal error:  Uncaught Error: Class "Auth" not found in D:\OSPanel\domains\localhost\login.php:20
Stack trace:
#0 {main}
  thrown in D:\OSPanel\domains\localhost\login.php on line 20
[15-Jan-2026 09:20:58 Europe/Moscow] ✅ Подключение к БД установлено: localhost:3307, база: skladpro
[15-Jan-2026 09:21:18 Europe/Moscow] ✅ Подключение к БД установлено: localhost:3307, база: skladpro
[15-Jan-2026 09:21:32 Europe/Moscow] ✅ Подключение к БД установлено: localhost:3307, база: skladpro
[15-Jan-2026 09:40:15 Europe/Moscow] ✅ Подключение к БД установлено: localhost:3307, база: skladpro
[15-Jan-2026 09:41:04 Europe/Moscow] ✅ Подключение к БД установлено: localhost:3307, база: skladpro
[15-Jan-2026 09:45:45 Europe/Moscow] ✅ Подключение к БД установлено: localhost:3307, база: skladpro
[15-Jan-2026 10:00:33 Europe/Moscow] PHP Fatal error:  Uncaught Error: Class "Auth" not found in D:\OSPanel\domains\localhost\login.php:20
Stack trace:
#0 {main}
  thrown in D:\OSPanel\domains\localhost\login.php on line 20
[15-Jan-2026 10:02:41 Europe/Moscow] PHP Fatal error:  Uncaught Error: Class "Auth" not found in D:\OSPanel\domains\localhost\includes\auth.php:24
Stack trace:
#0 D:\OSPanel\domains\localhost\config.php(58): require_once()
#1 D:\OSPanel\domains\localhost\login.php(2): require_once('D:\\OSPanel\\doma...')
#2 {main}
  thrown in D:\OSPanel\domains\localhost\includes\auth.php on line 24
[15-Jan-2026 10:13:38 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\auth.php:160) in D:\OSPanel\domains\localhost\index.php on line 6
[15-Jan-2026 10:23:36 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\auth.php:160) in D:\OSPanel\domains\localhost\index.php on line 6
[15-Jan-2026 10:29:08 Europe/Moscow] PHP Fatal error:  Cannot redeclare get_current_user() in D:\OSPanel\domains\localhost\includes\auth.php on line 72
[15-Jan-2026 10:29:32 Europe/Moscow] PHP Fatal error:  Cannot redeclare get_current_user() in D:\OSPanel\domains\localhost\includes\auth.php on line 72
[15-Jan-2026 10:31:59 Europe/Moscow] PHP Fatal error:  Cannot redeclare hash_password() (previously declared in D:\OSPanel\domains\localhost\includes\security.php:96) in D:\OSPanel\domains\localhost\includes\auth.php on line 190
[15-Jan-2026 10:32:15 Europe/Moscow] PHP Warning:  require_once(auth.php): Failed to open stream: No such file or directory in D:\OSPanel\domains\localhost\login.php on line 11
[15-Jan-2026 10:32:15 Europe/Moscow] PHP Fatal error:  Uncaught Error: Failed opening required 'auth.php' (include_path='.') in D:\OSPanel\domains\localhost\login.php:11
Stack trace:
#0 {main}
  thrown in D:\OSPanel\domains\localhost\login.php on line 11
[15-Jan-2026 10:32:35 Europe/Moscow] PHP Warning:  require_once(auth.php): Failed to open stream: No such file or directory in D:\OSPanel\domains\localhost\login.php on line 11
[15-Jan-2026 10:32:35 Europe/Moscow] PHP Fatal error:  Uncaught Error: Failed opening required 'auth.php' (include_path='.') in D:\OSPanel\domains\localhost\login.php:11
Stack trace:
#0 {main}
  thrown in D:\OSPanel\domains\localhost\login.php on line 11
[15-Jan-2026 10:35:11 Europe/Moscow] PHP Fatal error:  Uncaught Error: Class "Auth" not found in D:\OSPanel\domains\localhost\modules\products\index.php:202
Stack trace:
#0 D:\OSPanel\domains\localhost\index.php(41): include_once()
#1 {main}
  thrown in D:\OSPanel\domains\localhost\modules\products\index.php on line 202
[15-Jan-2026 10:45:22 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:102) in D:\OSPanel\domains\localhost\modules\products\index.php on line 59
[15-Jan-2026 10:47:56 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:102) in D:\OSPanel\domains\localhost\modules\products\add.php on line 53
[15-Jan-2026 11:07:12 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:102) in D:\OSPanel\domains\localhost\modules\dashboard\index.php on line 32
[15-Jan-2026 12:23:01 Europe/Moscow] PHP Fatal error:  Cannot redeclare get_current_user() in D:\OSPanel\domains\localhost\includes\functions.php on line 67
[15-Jan-2026 12:41:36 Europe/Moscow] PHP Fatal error:  Cannot redeclare clean_input() (previously declared in D:\OSPanel\domains\localhost\config.php:47) in D:\OSPanel\domains\localhost\includes\functions.php on line 62
[15-Jan-2026 13:03:02 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:02 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:03:02 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:03:02 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:03:02 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:03:02 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:03:02 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:03:11 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:11 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:03:11 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 13:03:11 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:03:19 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:26 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:30 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:36 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:36 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:03:36 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:03:36 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:03:36 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:03:36 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:03:36 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:03:44 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:44 Europe/Moscow] SQL Error: SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'p'
[15-Jan-2026 13:03:44 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    LEFT JOIN products p ON sb.product_id = p.id
    WHERE sb.quantity > 0 AND p.category_id = ?
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:03:44 Europe/Moscow] SQL Params: Array
(
    [0] => 7
)

[15-Jan-2026 13:03:44 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:03:44 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:03:44 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:03:59 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:03:59 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:03:59 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:03:59 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:03:59 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:03:59 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:03:59 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:04:04 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:04:10 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:04:10 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:04:10 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:04:10 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:04:10 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:04:10 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:04:10 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:04:15 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:04:15 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:04:15 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:04:15 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:04:15 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:04:15 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:04:15 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:04:28 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:04:28 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:04:28 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:04:28 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:04:28 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:04:28 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:04:28 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:09 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:06:09 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:06:09 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:06:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:09 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:06:09 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:06:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:26 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:06:26 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:06:26 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:06:26 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:26 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:06:26 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:06:26 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:41 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:06:41 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:06:41 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:06:41 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:41 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:06:41 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:06:41 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:48 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:06:48 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:06:48 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:06:48 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:48 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:06:48 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:06:48 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:48 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:88) in D:\OSPanel\domains\localhost\modules\reports\stock.php on line 121
[15-Jan-2026 13:06:48 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:88) in D:\OSPanel\domains\localhost\modules\reports\stock.php on line 122
[15-Jan-2026 13:06:48 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:88) in D:\OSPanel\domains\localhost\modules\reports\stock.php on line 123
[15-Jan-2026 13:06:58 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:06:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:06:58 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:06:58 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:06:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:06:58 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:06:58 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:07:03 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:07:10 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:07:10 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:07:10 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:07:10 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:07:10 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:07:10 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:07:10 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:07:18 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:07:18 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:07:18 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 13:07:18 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:07:45 Europe/Moscow] PHP Deprecated:  trim(): Passing null to parameter #1 ($string) of type string is deprecated in D:\OSPanel\domains\localhost\includes\functions.php on line 18
[15-Jan-2026 13:07:45 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:07:45 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:07:45 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:07:45 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:07:45 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:07:45 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:11:40 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:11:40 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:11:40 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:11:40 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:11:40 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:11:40 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:11:46 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:11:46 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 13:11:46 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:11:59 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:11:59 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 13:11:59 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:12:42 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'user_agent' in 'field list'
[15-Jan-2026 13:12:42 Europe/Moscow] SQL Query: INSERT INTO audit_log (user_id, action, details, ip_address, user_agent) VALUES (?, ?, ?, ?, ?)
[15-Jan-2026 13:12:42 Europe/Moscow] SQL Params: Array
(
    [0] => 1
    [1] => PRODUCT_ADD
    [2] => Добавлен товар ID: 10 (qwedf1325)
    [3] => 127.0.0.1
    [4] => Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
)

[15-Jan-2026 13:12:42 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:102) in D:\OSPanel\domains\localhost\modules\products\add.php on line 53
[15-Jan-2026 13:15:05 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:15:05 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:15:05 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:15:05 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:15:05 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:15:05 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:15:16 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:15:16 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:15:16 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:15:16 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:15:16 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:15:16 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:15:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:15:49 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:15:49 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:15:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:15:49 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:15:49 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:15:55 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:15:55 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 13:15:55 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 13:15:55 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:15:55 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1

[15-Jan-2026 13:15:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:15:55 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 13:15:55 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 13:15:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:16:11 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:16:11 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1 AND (p.article LIKE ? OR p.name LIKE ? OR p.barcode LIKE ?) AND p.category_id = ?
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 13:16:11 Europe/Moscow] SQL Params: Array
(
    [0] => %стол%
    [1] => %стол%
    [2] => %стол%
    [3] => 7
    [4] => 20
    [5] => 0
)

[15-Jan-2026 13:16:11 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:16:11 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1 AND (p.article LIKE ? OR p.name LIKE ? OR p.barcode LIKE ?) AND p.category_id = ?

[15-Jan-2026 13:16:11 Europe/Moscow] SQL Params: Array
(
    [0] => %стол%
    [1] => %стол%
    [2] => %стол%
    [3] => 7
)

[15-Jan-2026 13:16:11 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 13:16:11 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 13:16:11 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:16:17 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:16:17 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1 AND (p.article LIKE ? OR p.name LIKE ? OR p.barcode LIKE ?) AND p.category_id = ?
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 13:16:17 Europe/Moscow] SQL Params: Array
(
    [0] => %стол%
    [1] => %стол%
    [2] => %стол%
    [3] => 6
    [4] => 20
    [5] => 0
)

[15-Jan-2026 13:16:17 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:16:17 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1 AND (p.article LIKE ? OR p.name LIKE ? OR p.barcode LIKE ?) AND p.category_id = ?

[15-Jan-2026 13:16:17 Europe/Moscow] SQL Params: Array
(
    [0] => %стол%
    [1] => %стол%
    [2] => %стол%
    [3] => 6
)

[15-Jan-2026 13:16:17 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 13:16:17 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 13:16:17 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:16:25 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:16:25 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 13:16:25 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 13:16:25 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:16:25 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1

[15-Jan-2026 13:16:25 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:16:25 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 13:16:25 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 13:16:25 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:16:29 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:16:29 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:16:29 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:16:29 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:16:29 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:16:29 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:21:39 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:21:39 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 13:21:39 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:22:34 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 13:22:34 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 13:22:34 Europe/Moscow] SQL Params: Array
(
    [0] => 12374861278
    [1] => стул 120см
    [2] => 6
    [3] => шт
    [4] => 
    [5] => 0
    [6] => 0
    [7] => 
    [8] => 2026-01-15 13:22:34
    [9] => 1
)

[15-Jan-2026 13:25:44 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 13:25:44 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 13:25:44 Europe/Moscow] SQL Params: Array
(
    [0] => 12374861278
    [1] => стул 120см
    [2] => 6
    [3] => шт
    [4] => 
    [5] => 0
    [6] => 0
    [7] => 
    [8] => 2026-01-15 13:25:44
    [9] => 1
)

[15-Jan-2026 13:25:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 13:25:49 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 13:25:49 Europe/Moscow] SQL Params: Array
(
    [0] => 12374861278
    [1] => стул 120см
    [2] => 6
    [3] => шт
    [4] => 
    [5] => 0
    [6] => 0
    [7] => 
    [8] => 2026-01-15 13:25:49
    [9] => 1
)

[15-Jan-2026 13:26:18 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 13:26:18 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 13:26:18 Europe/Moscow] SQL Params: Array
(
    [0] => 12374861278
    [1] => стул120см
    [2] => 6
    [3] => шт
    [4] => 
    [5] => 5
    [6] => 15
    [7] => 
    [8] => 2026-01-15 13:26:18
    [9] => 1
)

[15-Jan-2026 13:27:56 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'user_agent' in 'field list'
[15-Jan-2026 13:27:56 Europe/Moscow] SQL Query: INSERT INTO audit_log (user_id, action, details, ip_address, user_agent) VALUES (?, ?, ?, ?, ?)
[15-Jan-2026 13:27:56 Europe/Moscow] SQL Params: Array
(
    [0] => 1
    [1] => PRODUCT_ADD
    [2] => Добавлен товар ID: 11 (12374861278)
    [3] => 127.0.0.1
    [4] => Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
)

[15-Jan-2026 13:27:56 Europe/Moscow] PHP Warning:  Cannot modify header information - headers already sent by (output started at D:\OSPanel\domains\localhost\includes\header.php:102) in D:\OSPanel\domains\localhost\modules\products\add.php on line 56
[15-Jan-2026 13:38:32 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:38:32 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM products WHERE is_active = 1 AND is_deleted = 0
[15-Jan-2026 13:38:32 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:38:32 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:38:32 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, p.min_stock, 
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 
      AND p.is_deleted = 0
      AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY current_stock ASC
    LIMIT 10

[15-Jan-2026 13:38:32 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:38:42 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:38:42 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 13:38:42 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 13:38:42 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:38:42 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1

[15-Jan-2026 13:38:42 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:38:42 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 13:38:42 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 13:38:42 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:38:51 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:38:51 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1 AND p.category_id = ?
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 13:38:51 Europe/Moscow] SQL Params: Array
(
    [0] => 6
    [1] => 20
    [2] => 0
)

[15-Jan-2026 13:38:51 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:38:51 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1 AND p.category_id = ?

[15-Jan-2026 13:38:51 Europe/Moscow] SQL Params: Array
(
    [0] => 6
)

[15-Jan-2026 13:38:51 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 13:38:51 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 13:38:51 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:38:57 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:38:57 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 13:38:57 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:39:36 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:39:36 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 13:39:36 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:39:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:39:49 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:39:49 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:39:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:39:49 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:39:49 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:39:52 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:39:52 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:39:52 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:39:52 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:39:52 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:39:52 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:41:09 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:41:09 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 13:41:09 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 13:41:09 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 13:41:09 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1

[15-Jan-2026 13:41:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:41:09 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 13:41:09 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 13:41:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:41:18 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 13:41:18 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 13:41:18 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 13:41:18 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 13:41:18 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 13:41:18 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:30:08 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 14:30:08 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 14:30:08 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:30:08 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 14:30:08 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 14:30:08 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:18 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 14:58:18 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 14:58:18 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:18 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 14:58:18 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 14:58:18 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:18 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 14:58:18 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 14:58:18 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:19 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 14:58:19 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 14:58:19 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:19 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'al.created_at' in 'field list'
[15-Jan-2026 14:58:19 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 14:58:19 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:29 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 14:58:29 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 14:58:29 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:29 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 14:58:29 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 14:58:29 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:34 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 14:58:34 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 14:58:34 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:34 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 14:58:34 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 14:58:34 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:44 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 14:58:44 Europe/Moscow] SQL Query: 
    SELECT 
        DATE(d.document_date) as date,
        ot.code as operation_type,
        ot.name as operation_name,
        p.article,
        p.name as product_name,
        p.unit,
        c.name as category_name,
        SUM(CASE WHEN it.quantity > 0 THEN it.quantity ELSE 0 END) as incoming,
        SUM(CASE WHEN it.quantity < 0 THEN ABS(it.quantity) ELSE 0 END) as outgoing,
        SUM(it.quantity) as net_change,
        COUNT(DISTINCT d.id) as documents_count,
        COUNT(*) as transactions_count
    FROM inventory_transactions it
    JOIN documents d ON it.document_id = d.id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    JOIN products p ON it.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    WHERE DATE(d.document_date) BETWEEN ? AND ?
    GROUP BY DATE(d.document_date), ot.code, it.product_id
    ORDER BY d.document_date DESC, ot.code, p.article

[15-Jan-2026 14:58:44 Europe/Moscow] SQL Params: Array
(
    [0] => 2026-01-01
    [1] => 2026-01-15
)

[15-Jan-2026 14:58:44 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 14:58:44 Europe/Moscow] SQL Query: 
    SELECT id, article, name 
    FROM products 
    WHERE is_active = 1 
    ORDER BY article 
    LIMIT 100

[15-Jan-2026 14:58:44 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:44 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.operation_types' doesn't exist
[15-Jan-2026 14:58:44 Europe/Moscow] SQL Query: 
    SELECT code, name 
    FROM operation_types 
    WHERE affects_stock = 1 
    ORDER BY name

[15-Jan-2026 14:58:44 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:50 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:50 Europe/Moscow] SQL Query: 
    SELECT * FROM users 
    WHERE is_deleted = 0 AND is_active = 1
    ORDER BY created_at DESC
    LIMIT ? OFFSET ?

[15-Jan-2026 14:58:50 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 14:58:50 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:50 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM users WHERE is_deleted = 0 AND is_active = 1
[15-Jan-2026 14:58:50 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:50 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:50 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_users,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_users,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_users,
        COUNT(DISTINCT role) as roles_count
    FROM users 
    WHERE is_deleted = 0

[15-Jan-2026 14:58:50 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:50 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:50 Europe/Moscow] SQL Query: 
                SELECT role, COUNT(*) as count,
                       SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_count
                FROM users 
                WHERE is_deleted = 0
                GROUP BY role
                ORDER BY 
                    CASE role 
                        WHEN 'admin' THEN 1
                        WHEN 'manager' THEN 2
                        WHEN 'storekeeper' THEN 3
                        WHEN 'viewer' THEN 4
                        ELSE 5
                    END
            
[15-Jan-2026 14:58:50 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:55 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:55 Europe/Moscow] SQL Query: 
    SELECT * FROM users 
    WHERE is_deleted = 0 AND is_active = 1
    ORDER BY created_at DESC
    LIMIT ? OFFSET ?

[15-Jan-2026 14:58:55 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 14:58:55 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:55 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM users WHERE is_deleted = 0 AND is_active = 1
[15-Jan-2026 14:58:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:55 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:55 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_users,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_users,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_users,
        COUNT(DISTINCT role) as roles_count
    FROM users 
    WHERE is_deleted = 0

[15-Jan-2026 14:58:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:55 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:55 Europe/Moscow] SQL Query: 
                SELECT role, COUNT(*) as count,
                       SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_count
                FROM users 
                WHERE is_deleted = 0
                GROUP BY role
                ORDER BY 
                    CASE role 
                        WHEN 'admin' THEN 1
                        WHEN 'manager' THEN 2
                        WHEN 'storekeeper' THEN 3
                        WHEN 'viewer' THEN 4
                        ELSE 5
                    END
            
[15-Jan-2026 14:58:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:58 Europe/Moscow] SQL Query: 
    SELECT * FROM users 
    WHERE is_deleted = 0 AND is_active = 1
    ORDER BY created_at DESC
    LIMIT ? OFFSET ?

[15-Jan-2026 14:58:58 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 14:58:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:58 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM users WHERE is_deleted = 0 AND is_active = 1
[15-Jan-2026 14:58:58 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:58 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_users,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_users,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_users,
        COUNT(DISTINCT role) as roles_count
    FROM users 
    WHERE is_deleted = 0

[15-Jan-2026 14:58:58 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:58:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:58:58 Europe/Moscow] SQL Query: 
                SELECT role, COUNT(*) as count,
                       SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_count
                FROM users 
                WHERE is_deleted = 0
                GROUP BY role
                ORDER BY 
                    CASE role 
                        WHEN 'admin' THEN 1
                        WHEN 'manager' THEN 2
                        WHEN 'storekeeper' THEN 3
                        WHEN 'viewer' THEN 4
                        ELSE 5
                    END
            
[15-Jan-2026 14:58:58 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:02 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:59:02 Europe/Moscow] SQL Query: 
    SELECT * FROM users 
    WHERE is_deleted = 0 AND is_active = 1
    ORDER BY created_at DESC
    LIMIT ? OFFSET ?

[15-Jan-2026 14:59:02 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 14:59:02 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:59:02 Europe/Moscow] SQL Query: SELECT COUNT(*) as total FROM users WHERE is_deleted = 0 AND is_active = 1
[15-Jan-2026 14:59:02 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:02 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:59:02 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_users,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_users,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_users,
        COUNT(DISTINCT role) as roles_count
    FROM users 
    WHERE is_deleted = 0

[15-Jan-2026 14:59:02 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:02 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_deleted' in 'where clause'
[15-Jan-2026 14:59:02 Europe/Moscow] SQL Query: 
                SELECT role, COUNT(*) as count,
                       SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_count
                FROM users 
                WHERE is_deleted = 0
                GROUP BY role
                ORDER BY 
                    CASE role 
                        WHEN 'admin' THEN 1
                        WHEN 'manager' THEN 2
                        WHEN 'storekeeper' THEN 3
                        WHEN 'viewer' THEN 4
                        ELSE 5
                    END
            
[15-Jan-2026 14:59:02 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 14:59:09 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 14:59:09 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 14:59:09 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 14:59:09 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'al.created_at' in 'field list'
[15-Jan-2026 14:59:09 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 14:59:09 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:15 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 14:59:15 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 14:59:15 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 14:59:15 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 14:59:15 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1

[15-Jan-2026 14:59:15 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 14:59:15 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 14:59:15 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 14:59:15 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:00:00 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 15:00:00 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:00:00 Europe/Moscow] SQL Params: Array
(
    [0] => PROD-375887-691
    [1] => телефон
    [2] => 1
    [3] => шт
    [4] => 
    [5] => 2
    [6] => 6
    [7] => 
    [8] => 2026-01-15 15:00:00
    [9] => 1
)

[15-Jan-2026 15:00:08 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 15:00:08 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:00:08 Europe/Moscow] SQL Params: Array
(
    [0] => PROD-375887-691
    [1] => телефон
    [2] => 1
    [3] => шт
    [4] => 
    [5] => 2
    [6] => 6
    [7] => 
    [8] => 2026-01-15 15:00:08
    [9] => 1
)

[15-Jan-2026 15:00:37 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 15:00:37 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:00:37 Europe/Moscow] SQL Params: Array
(
    [0] => PROD-375887-691
    [1] => телефон
    [2] => 1
    [3] => шт
    [4] => 
    [5] => 2
    [6] => 6
    [7] => 
    [8] => 2026-01-15 15:00:37
    [9] => 1
)

[15-Jan-2026 15:00:38 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 15:00:38 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:00:38 Europe/Moscow] SQL Params: Array
(
    [0] => PROD-375887-691
    [1] => телефон
    [2] => 1
    [3] => шт
    [4] => 
    [5] => 2
    [6] => 6
    [7] => 
    [8] => 2026-01-15 15:00:38
    [9] => 1
)

[15-Jan-2026 15:00:41 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 15:00:41 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:00:41 Europe/Moscow] SQL Params: Array
(
    [0] => PROD-375887-691
    [1] => телефон
    [2] => 1
    [3] => шт
    [4] => 
    [5] => 2
    [6] => 6
    [7] => 
    [8] => 2026-01-15 15:00:41
    [9] => 1
)

[15-Jan-2026 15:00:43 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 15:00:43 Europe/Moscow] SQL Query: 
    SELECT id, article, name, unit 
    FROM products 
    WHERE is_active = 1 AND is_deleted = 0 
    ORDER BY article

[15-Jan-2026 15:00:43 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:00:53 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'current_load' in 'field list'
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Query: 
                            SELECT code, name, current_load, capacity 
                            FROM storage_locations 
                            WHERE zone = ? AND is_active = 1 
                            ORDER BY code
                            LIMIT 10
                        
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Params: Array
(
    [0] => receiving
)

[15-Jan-2026 15:00:53 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'current_load' in 'field list'
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Query: 
                            SELECT code, name, current_load, capacity 
                            FROM storage_locations 
                            WHERE zone = ? AND is_active = 1 
                            ORDER BY code
                            LIMIT 10
                        
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Params: Array
(
    [0] => storage
)

[15-Jan-2026 15:00:53 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'current_load' in 'field list'
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Query: 
                            SELECT code, name, current_load, capacity 
                            FROM storage_locations 
                            WHERE zone = ? AND is_active = 1 
                            ORDER BY code
                            LIMIT 10
                        
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Params: Array
(
    [0] => shipping
)

[15-Jan-2026 15:00:53 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'current_load' in 'field list'
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Query: 
                            SELECT code, name, current_load, capacity 
                            FROM storage_locations 
                            WHERE zone = ? AND is_active = 1 
                            ORDER BY code
                            LIMIT 10
                        
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Params: Array
(
    [0] => quarantine
)

[15-Jan-2026 15:00:53 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'current_load' in 'field list'
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Query: 
                            SELECT code, name, current_load, capacity 
                            FROM storage_locations 
                            WHERE zone = ? AND is_active = 1 
                            ORDER BY code
                            LIMIT 10
                        
[15-Jan-2026 15:00:53 Europe/Moscow] SQL Params: Array
(
    [0] => defective
)

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:14:45 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:14:45 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:14:45 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:14:45 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'al.created_at' in 'field list'
[15-Jan-2026 15:14:45 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 15:14:45 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 238
[15-Jan-2026 15:14:56 Europe/Moscow] PHP Warning:  Undefined array key "current_load" in D:\OSPanel\domains\localhost\modules\storage\index.php on line 259
[15-Jan-2026 15:15:44 Europe/Moscow] PHP Fatal error:  Uncaught Error: Failed opening required 'D:\OSPanel\domains\localhost/includes/fix_warnings.php' (include_path='.') in D:\OSPanel\domains\localhost\config.php:51
Stack trace:
#0 D:\OSPanel\domains\localhost\index.php(2): require_once()
#1 {main}
  thrown in D:\OSPanel\domains\localhost\config.php on line 51
[15-Jan-2026 15:17:08 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:08 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit
    FROM products p
    WHERE p.is_active = 1 AND p.is_deleted = 0
    AND EXISTS (
        SELECT 1 FROM stock_balances sb 
        WHERE sb.product_id = p.id AND sb.quantity > 0
    )
    ORDER BY p.article

[15-Jan-2026 15:17:08 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:28 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:28 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit
    FROM products p
    WHERE p.is_active = 1 AND p.is_deleted = 0
    AND EXISTS (
        SELECT 1 FROM stock_balances sb 
        WHERE sb.product_id = p.id AND sb.quantity > 0
    )
    ORDER BY p.article

[15-Jan-2026 15:17:28 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:37 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.created_by' in 'on clause'
[15-Jan-2026 15:17:37 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    
    WHERE sb.quantity > 0
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 15:17:37 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:37 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'where clause'
[15-Jan-2026 15:17:37 Europe/Moscow] SQL Query: SELECT id, article, name FROM products WHERE is_active = 1 ORDER BY article LIMIT 100
[15-Jan-2026 15:17:37 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:43 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:43 Europe/Moscow] SQL Query: 
    SELECT p.id, p.article, p.name, p.unit, c.name as category_name,
           COUNT(DISTINCT sb.location_id) as locations_count,
           COALESCE(SUM(sb.quantity), 0) as total_quantity
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0
    GROUP BY p.id
    HAVING total_quantity > 0
    ORDER BY p.article
    LIMIT 100

[15-Jan-2026 15:17:43 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:49 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 15:17:49 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 15:17:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:49 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1

[15-Jan-2026 15:17:49 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:49 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 15:17:49 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 15:17:49 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:17:54 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:17:54 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:54 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:17:54 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'al.created_at' in 'field list'
[15-Jan-2026 15:17:54 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 15:17:54 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:59 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:59 Europe/Moscow] SQL Query: 
    SELECT p.*, 
           c.name as category_name,
           COALESCE(SUM(sb.quantity), 0) as current_stock,
           COUNT(DISTINCT b.id) as batch_count
    FROM products p
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    LEFT JOIN batches b ON p.id = b.product_id
    WHERE p.is_deleted = 0 AND p.is_active = 1
    GROUP BY p.id
    ORDER BY p.article
    LIMIT ? OFFSET ?

[15-Jan-2026 15:17:59 Europe/Moscow] SQL Params: Array
(
    [0] => 20
    [1] => 0
)

[15-Jan-2026 15:17:59 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:17:59 Europe/Moscow] SQL Query: 
    SELECT COUNT(*) as total
    FROM products p
    WHERE p.is_deleted = 0 AND p.is_active = 1

[15-Jan-2026 15:17:59 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:17:59 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'is_active' in 'field list'
[15-Jan-2026 15:17:59 Europe/Moscow] SQL Query: 
    SELECT 
        COUNT(*) as total_products,
        SUM(CASE WHEN is_active = 1 THEN 1 ELSE 0 END) as active_products,
        SUM(CASE WHEN is_active = 0 THEN 1 ELSE 0 END) as inactive_products
    FROM products 
    WHERE is_deleted = 0

[15-Jan-2026 15:17:59 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:18:20 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 15:18:20 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:18:20 Europe/Moscow] SQL Params: Array
(
    [0] => PROD-486849-783
    [1] => телефон
    [2] => 1
    [3] => шт
    [4] => 
    [5] => 3
    [6] => 6
    [7] => 
    [8] => 2026-01-15 15:18:20
    [9] => 1
)

[15-Jan-2026 15:32:52 Europe/Moscow] PHP Fatal error:  Uncaught Error: Failed opening required 'D:\OSPanel\domains\localhost/includes/fix_warnings.php' (include_path='.') in D:\OSPanel\domains\localhost\config.php:66
Stack trace:
#0 D:\OSPanel\domains\localhost\index.php(2): require_once()
#1 {main}
  thrown in D:\OSPanel\domains\localhost\config.php on line 66
[15-Jan-2026 15:33:27 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'created_by' in 'field list'
[15-Jan-2026 15:33:27 Europe/Moscow] SQL Query: INSERT INTO products (article, name, category_id, unit, barcode, min_stock, max_stock, description, created_at, created_by) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:33:27 Europe/Moscow] SQL Params: Array
(
    [0] => 213wqe
    [1] => sad
    [2] => 9
    [3] => наб
    [4] => 
    [5] => 23
    [6] => 624
    [7] => 
    [8] => 2026-01-15 15:33:27
    [9] => 1
)

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:33:34 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:33:34 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:33:34 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:33:34 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'al.created_at' in 'field list'
[15-Jan-2026 15:33:34 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 15:33:34 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:34:37 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:34:37 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:34:37 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:34:37 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'al.created_at' in 'field list'
[15-Jan-2026 15:34:37 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 15:34:37 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:35:40 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:35:40 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'p.is_active' in 'where clause'
[15-Jan-2026 15:35:40 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:35:40 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.audit_log' doesn't exist
[15-Jan-2026 15:35:40 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 15:35:40 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.products' doesn't exist
[15-Jan-2026 15:40:55 Europe/Moscow] SQL Query: 
    SELECT 
        (SELECT COUNT(*) FROM products WHERE is_active = 1 AND is_deleted = 0) as total_products,
        (SELECT COUNT(*) FROM storage_locations WHERE is_active = 1) as total_locations,
        (SELECT COUNT(*) FROM users WHERE is_active = 1 AND is_deleted = 0) as total_users,
        (SELECT COUNT(*) FROM documents WHERE DATE(created_at) = CURDATE()) as today_documents,
        (SELECT COALESCE(SUM(quantity), 0) FROM stock_balances) as total_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances WHERE quantity <= 0) as out_of_stock,
        (SELECT COUNT(DISTINCT product_id) FROM stock_balances sb 
         JOIN products p ON sb.product_id = p.id 
         WHERE sb.quantity <= p.min_stock AND p.min_stock > 0) as low_stock

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:40:55 Europe/Moscow] SQL Query: 
    SELECT d.document_number, d.document_date, ot.name as operation, 
           d.counterparty, COUNT(it.id) as items, u.full_name
    FROM documents d
    JOIN operation_types ot ON d.operation_type_id = ot.id
    LEFT JOIN inventory_transactions it ON d.id = it.document_id
    LEFT JOIN users u ON d.created_by = u.id
    WHERE d.status = 'completed'
    GROUP BY d.id
    ORDER BY d.created_at DESC
    LIMIT 10

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.products' doesn't exist
[15-Jan-2026 15:40:55 Europe/Moscow] SQL Query: 
    SELECT p.article, p.name, p.unit, p.min_stock,
           COALESCE(SUM(sb.quantity), 0) as current_stock
    FROM products p
    LEFT JOIN stock_balances sb ON p.id = sb.product_id
    WHERE p.is_active = 1 AND p.is_deleted = 0 AND p.min_stock > 0
    GROUP BY p.id
    HAVING current_stock <= p.min_stock
    ORDER BY (current_stock / p.min_stock)
    LIMIT 10

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.documents' doesn't exist
[15-Jan-2026 15:40:55 Europe/Moscow] SQL Query: 
    SELECT 
        DATE_FORMAT(d.created_at, '%Y-%m') as month,
        COUNT(DISTINCT d.id) as documents,
        SUM(CASE WHEN ot.direction = 'in' THEN ABS(it.quantity) ELSE 0 END) as incoming,
        SUM(CASE WHEN ot.direction = 'out' THEN ABS(it.quantity) ELSE 0 END) as outgoing
    FROM documents d
    JOIN inventory_transactions it ON d.id = it.document_id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    WHERE d.status = 'completed' AND d.created_at >= DATE_SUB(NOW(), INTERVAL 6 MONTH)
    GROUP BY DATE_FORMAT(d.created_at, '%Y-%m')
    ORDER BY month DESC
    LIMIT 6

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'skladpro.audit_log' doesn't exist
[15-Jan-2026 15:40:55 Europe/Moscow] SQL Query: 
    SELECT u.username, u.full_name, u.role,
           COUNT(al.id) as actions_count,
           MAX(al.created_at) as last_action
    FROM audit_log al
    JOIN users u ON al.user_id = u.id
    WHERE DATE(al.created_at) = CURDATE()
    GROUP BY u.id
    ORDER BY actions_count DESC
    LIMIT 5

[15-Jan-2026 15:40:55 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:42:00 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'operation_type' in 'where clause'
[15-Jan-2026 15:42:00 Europe/Moscow] SQL Query: 
                        SELECT COUNT(*) as count, SUM(quantity) as total 
                        FROM inventory_transactions 
                        WHERE DATE(created_at) = CURDATE() 
                        AND operation_type = 'receipt'
                        AND user_id = ?
                    
[15-Jan-2026 15:42:00 Europe/Moscow] SQL Params: Array
(
    [0] => 1
)

[15-Jan-2026 15:42:00 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'document_number' in 'field list'
[15-Jan-2026 15:42:00 Europe/Moscow] SQL Query: 
                        SELECT DISTINCT document_number, COUNT(*) as items, 
                               SUM(quantity) as total_qty, MAX(created_at) as last_date
                        FROM inventory_transactions 
                        WHERE operation_type = 'receipt'
                        GROUP BY document_number 
                        ORDER BY last_date DESC 
                        LIMIT 5
                    
[15-Jan-2026 15:42:00 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:42:31 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'operation_type' in 'where clause'
[15-Jan-2026 15:42:31 Europe/Moscow] SQL Query: 
                        SELECT COUNT(*) as count, SUM(quantity) as total 
                        FROM inventory_transactions 
                        WHERE DATE(created_at) = CURDATE() 
                        AND operation_type = 'receipt'
                        AND user_id = ?
                    
[15-Jan-2026 15:42:31 Europe/Moscow] SQL Params: Array
(
    [0] => 1
)

[15-Jan-2026 15:42:31 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'document_number' in 'field list'
[15-Jan-2026 15:42:31 Europe/Moscow] SQL Query: 
                        SELECT DISTINCT document_number, COUNT(*) as items, 
                               SUM(quantity) as total_qty, MAX(created_at) as last_date
                        FROM inventory_transactions 
                        WHERE operation_type = 'receipt'
                        GROUP BY document_number 
                        ORDER BY last_date DESC 
                        LIMIT 5
                    
[15-Jan-2026 15:42:31 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:42:37 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'operation_type' in 'field list'
[15-Jan-2026 15:42:37 Europe/Moscow] SQL Query: INSERT INTO inventory_transactions (product_id, batch_id, location_id_to, quantity, operation_type, document_number, document_date, user_id, comments) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:42:37 Europe/Moscow] SQL Params: Array
(
    [0] => 3
    [1] => 
    [2] => 2
    [3] => 30
    [4] => receipt
    [5] => ПРИХ-20260115-9608
    [6] => 2026-01-15
    [7] => 1
    [8] => Приемка от поставщика: sams
)

[15-Jan-2026 15:43:09 Europe/Moscow] SQL Error: SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'p'
[15-Jan-2026 15:43:09 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    LEFT JOIN products p ON sb.product_id = p.id
    WHERE sb.quantity > 0 AND p.category_id = ?
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 15:43:09 Europe/Moscow] SQL Params: Array
(
    [0] => 6
)

[15-Jan-2026 15:43:15 Europe/Moscow] SQL Error: SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'p'
[15-Jan-2026 15:43:15 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    LEFT JOIN products p ON sb.product_id = p.id
    WHERE sb.quantity > 0 AND p.category_id = ?
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 15:43:15 Europe/Moscow] SQL Params: Array
(
    [0] => 3
)

[15-Jan-2026 15:43:23 Europe/Moscow] SQL Error: SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'p'
[15-Jan-2026 15:43:23 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    LEFT JOIN products p ON sb.product_id = p.id
    WHERE sb.quantity > 0 AND p.category_id = ?
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 15:43:23 Europe/Moscow] SQL Params: Array
(
    [0] => 5
)

[15-Jan-2026 15:43:27 Europe/Moscow] SQL Error: SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'p'
[15-Jan-2026 15:43:27 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    LEFT JOIN products p ON sb.product_id = p.id
    WHERE sb.quantity > 0 AND p.category_id = ?
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 15:43:27 Europe/Moscow] SQL Params: Array
(
    [0] => 1
)

[15-Jan-2026 15:43:40 Europe/Moscow] SQL Error: SQLSTATE[42000]: Syntax error or access violation: 1066 Not unique table/alias: 'p'
[15-Jan-2026 15:43:40 Europe/Moscow] SQL Query: 
    SELECT 
        sb.*,
        p.article,
        p.name as product_name,
        p.unit,
        p.min_stock,
        p.max_stock,
        c.name as category_name,
        b.batch_number,
        b.expiry_date,
        b.supplier,
        b.purchase_price,
        l.code as location_code,
        l.name as location_name,
        l.zone as location_zone,
        u.full_name as created_by_name
    FROM stock_balances sb
    LEFT JOIN products p ON sb.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    LEFT JOIN batches b ON sb.batch_id = b.id
    LEFT JOIN storage_locations l ON sb.location_id = l.id
    LEFT JOIN users u ON p.created_by = u.id
    LEFT JOIN products p ON sb.product_id = p.id
    WHERE sb.quantity > 0 AND p.category_id = ?
    ORDER BY p.article, l.code, b.batch_number

[15-Jan-2026 15:43:40 Europe/Moscow] SQL Params: Array
(
    [0] => 2
)

[15-Jan-2026 15:45:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'operation_type' in 'where clause'
[15-Jan-2026 15:45:58 Europe/Moscow] SQL Query: 
                        SELECT COUNT(*) as count, SUM(quantity) as total 
                        FROM inventory_transactions 
                        WHERE DATE(created_at) = CURDATE() 
                        AND operation_type = 'receipt'
                        AND user_id = ?
                    
[15-Jan-2026 15:45:58 Europe/Moscow] SQL Params: Array
(
    [0] => 1
)

[15-Jan-2026 15:45:58 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'document_number' in 'field list'
[15-Jan-2026 15:45:58 Europe/Moscow] SQL Query: 
                        SELECT DISTINCT document_number, COUNT(*) as items, 
                               SUM(quantity) as total_qty, MAX(created_at) as last_date
                        FROM inventory_transactions 
                        WHERE operation_type = 'receipt'
                        GROUP BY document_number 
                        ORDER BY last_date DESC 
                        LIMIT 5
                    
[15-Jan-2026 15:45:58 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:46:07 Europe/Moscow] SQL Error: SQLSTATE[42000]: Syntax error or access violation: 1055 Expression #1 of ORDER BY clause is not in GROUP BY clause and contains nonaggregated column 'skladpro.d.document_date' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by
[15-Jan-2026 15:46:07 Europe/Moscow] SQL Query: 
    SELECT 
        DATE(d.document_date) as date,
        ot.code as operation_type,
        ot.name as operation_name,
        p.article,
        p.name as product_name,
        p.unit,
        c.name as category_name,
        SUM(CASE WHEN it.quantity > 0 THEN it.quantity ELSE 0 END) as incoming,
        SUM(CASE WHEN it.quantity < 0 THEN ABS(it.quantity) ELSE 0 END) as outgoing,
        SUM(it.quantity) as net_change,
        COUNT(DISTINCT d.id) as documents_count,
        COUNT(*) as transactions_count
    FROM inventory_transactions it
    JOIN documents d ON it.document_id = d.id
    JOIN operation_types ot ON d.operation_type_id = ot.id
    JOIN products p ON it.product_id = p.id
    LEFT JOIN categories c ON p.category_id = c.id
    WHERE DATE(d.document_date) BETWEEN ? AND ?
    GROUP BY DATE(d.document_date), ot.code, it.product_id
    ORDER BY d.document_date DESC, ot.code, p.article

[15-Jan-2026 15:46:07 Europe/Moscow] SQL Params: Array
(
    [0] => 2026-01-01
    [1] => 2026-01-15
)

[15-Jan-2026 15:48:22 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'operation_type' in 'where clause'
[15-Jan-2026 15:48:22 Europe/Moscow] SQL Query: 
                        SELECT COUNT(*) as count, SUM(quantity) as total 
                        FROM inventory_transactions 
                        WHERE DATE(created_at) = CURDATE() 
                        AND operation_type = 'receipt'
                        AND user_id = ?
                    
[15-Jan-2026 15:48:22 Europe/Moscow] SQL Params: Array
(
    [0] => 1
)

[15-Jan-2026 15:48:22 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'document_number' in 'field list'
[15-Jan-2026 15:48:22 Europe/Moscow] SQL Query: 
                        SELECT DISTINCT document_number, COUNT(*) as items, 
                               SUM(quantity) as total_qty, MAX(created_at) as last_date
                        FROM inventory_transactions 
                        WHERE operation_type = 'receipt'
                        GROUP BY document_number 
                        ORDER BY last_date DESC 
                        LIMIT 5
                    
[15-Jan-2026 15:48:22 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:48:50 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'operation_type' in 'where clause'
[15-Jan-2026 15:48:50 Europe/Moscow] SQL Query: 
                        SELECT COUNT(*) as count, SUM(quantity) as total 
                        FROM inventory_transactions 
                        WHERE DATE(created_at) = CURDATE() 
                        AND operation_type = 'receipt'
                        AND user_id = ?
                    
[15-Jan-2026 15:48:50 Europe/Moscow] SQL Params: Array
(
    [0] => 1
)

[15-Jan-2026 15:48:50 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'document_number' in 'field list'
[15-Jan-2026 15:48:50 Europe/Moscow] SQL Query: 
                        SELECT DISTINCT document_number, COUNT(*) as items, 
                               SUM(quantity) as total_qty, MAX(created_at) as last_date
                        FROM inventory_transactions 
                        WHERE operation_type = 'receipt'
                        GROUP BY document_number 
                        ORDER BY last_date DESC 
                        LIMIT 5
                    
[15-Jan-2026 15:48:50 Europe/Moscow] SQL Params: Array
(
)

[15-Jan-2026 15:48:56 Europe/Moscow] SQL Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'operation_type' in 'field list'
[15-Jan-2026 15:48:56 Europe/Moscow] SQL Query: INSERT INTO inventory_transactions (product_id, batch_id, location_id_to, quantity, operation_type, document_number, document_date, user_id, comments) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
[15-Jan-2026 15:48:56 Europe/Moscow] SQL Params: Array
(
    [0] => 4
    [1] => 
    [2] => 1
    [3] => 5
    [4] => receipt
    [5] => ПРИХ-20260115-0879
    [6] => 2026-01-15
    [7] => 1
    [8] => Приемка от поставщика: пом
)

